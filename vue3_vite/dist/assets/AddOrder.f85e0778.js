import{E as A}from"./axios.7f6bf870.js";import{E as C}from"./el-image-viewer.be72f516.js";/* empty css                */import{g as y}from"./address.3d23294c.js";import{a as P,i as k,_ as S}from"./noImg.06919004.js";import{b as x}from"./order.7af7f6be.js";import{_ as T,aa as h,o as c,j as l,q as s,d as _,w as u,s as g,l as i,P as b,ab as E,p as m,k as N,ad as F,ae as I}from"./index.93b7fa5a.js";import{E as V}from"./index.2e452faa.js";import"./index.cc09d482.js";import"./index.560cc0f0.js";const B={components:{ElConfigProvider:V},data(){return{address:{phone:"",consignee:"",detail:"",sex:"1",id:void 0},finishTime:"",cartData:[],note:""}},computed:{goodsNum(){let t=0;return this.cartData.forEach(a=>{t+=a.number}),t<99?t:"99+"},goodsPrice(){let t=0;return this.cartData.forEach(a=>{t+=a.number*a.amount}),t}},created(){this.initData()},methods:{goBack(){history.go(-1)},initData(){this.defaultAddress(),this.getCartData()},async defaultAddress(){const t=await y();t.data.code===1?(this.address=t.data.data,this.getFinishTime()):window.requestAnimationFrame(()=>{})},getFinishTime(){let t=new Date,a=t.getHours()+1,r=t.getMinutes();a.toString().length<2&&(a="0"+a),r.toString().length<2&&(r="0"+r),this.finishTime=a+":"+r},toAddressPage(){window.requestAnimationFrame(()=>{})},async getCartData(){const t=await P({});t.data.code===1?this.cartData=t.data.data:console.log(t.data.console.error)},async goToPaySuccess(){const t={remark:this.note,payMethod:1,addressBookId:this.address.id},a=await x(t);a.data.code===1?window.requestAnimationFrame(()=>{}):console.log(a.data.console.error)},imgPathConvert(t){return k(t)}}},n=t=>(F("data-v-a6f71991"),t=t(),I(),t),L={id:"add_order",class:"app"},q={class:"divHead"},M={class:"divTitle"},O={class:"divContent"},z={class:"divAddress"},G={class:"address"},H={class:"name"},j=n(()=>s("i",{class:"el-icon-arrow-right"},null,-1)),U=n(()=>s("div",{class:"divSplit"},null,-1)),J={class:"divFinishTime"},K={class:"order"},Q=n(()=>s("div",{class:"title"},"\u8BA2\u5355\u660E\u7EC6",-1)),R=n(()=>s("div",{class:"divSplit"},null,-1)),W={class:"itemList"},X=n(()=>s("div",{slot:"error",class:"image-slot"},[s("img",{src:S})],-1)),Y={class:"desc"},Z={class:"name"},$={class:"numPrice"},ss={class:"num"},ts={class:"price"},es=n(()=>s("span",{class:"spanMoney"},"\uFFE5",-1)),as={class:"note"},os=n(()=>s("div",{class:"title"},"\u5907\u6CE8",-1)),is={class:"divCart"},ns={class:"divNum"},ds=n(()=>s("span",null,"\uFFE5",-1)),rs=n(()=>s("div",{class:"divPrice"},null,-1));function cs(t,a,r,ls,e,d){const p=h("ArrowLeft"),v=A,f=C,D=h("van-field");return c(),l("div",L,[s("div",q,[s("div",M,[_(v,{onClick:d.goBack},{default:u(()=>[_(p)]),_:1},8,["onClick"]),g(" \u9E21\u4F60\u592A\u7F8E ")])]),s("div",O,[s("div",z,[s("div",{onClick:a[0]||(a[0]=(...o)=>d.toAddressPage&&d.toAddressPage(...o))},[s("div",G,i(e.address.detail),1),s("div",H,[s("span",null,i(e.address.consignee)+i(e.address.sex==="1"?"\u5148\u751F":"\u5973\u58EB"),1),s("span",null,i(e.address.phone),1)]),j]),U,s("div",J,"\u9884\u8BA1"+i(e.finishTime)+"\u9001\u8FBE",1)]),s("div",K,[Q,R,s("div",W,[(c(!0),l(b,null,E(e.cartData,(o,w)=>(c(),l("div",{class:"item",key:w},[_(f,{src:d.imgPathConvert(o.image)},{default:u(()=>[X]),_:2},1032,["src"]),s("div",Y,[s("div",Z,i(o.name),1),s("div",$,[s("span",ss,"x"+i(o.number),1),s("div",ts,[es,g(i(o.amount),1)])])])]))),128))])]),s("div",as,[os,_(D,{modelValue:e.note,"onUpdate:modelValue":a[1]||(a[1]=o=>e.note=o),rows:"2",autosize:"",type:"textarea",maxlength:"50",placeholder:"\u8BF7\u8F93\u5165\u60A8\u9700\u8981\u5907\u6CE8\u7684\u4FE1\u606F","show-word-limit":""},null,8,["modelValue"])])]),s("div",is,[s("div",{class:m({imgCartActive:e.cartData&&e.cartData.length>0,imgCart:!e.cartData||e.cartData.length<1})},null,2),e.cartData&&e.cartData.length>0?(c(),l("div",{key:0,class:m({divGoodsNum:!0,moreGoods:e.cartData&&e.cartData.length>99})},i(d.goodsNum),3)):N("",!0),s("div",ns,[ds,s("span",null,i(d.goodsPrice),1)]),rs,s("div",{class:m({btnSubmitActive:e.cartData&&e.cartData.length>0,btnSubmit:!e.cartData||e.cartData.length<1}),onClick:a[2]||(a[2]=(...o)=>d.goToPaySuccess&&d.goToPaySuccess(...o))},"\u53BB\u652F\u4ED8 ",2)])])}const As=T(B,[["render",cs],["__scopeId","data-v-a6f71991"]]);export{As as default};
