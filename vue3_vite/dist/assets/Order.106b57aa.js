import{E as A}from"./base.c25e0513.js";/* empty css                */import{o as b,a as I}from"./order.ab82c440.js";import{_ as S,ab as _,o,j as n,q as t,d as p,w as g,s as C,P as h,ac as m,m as x,l as r,k as B,ae as N,af as V}from"./index.7da13a9a.js";const D=""+new URL("../images/no_order.png",import.meta.url).href;const E={data(){return{paging:{page:1,pageSize:5,userId:sessionStorage.getItem("userId")},orderList:[],loading:!1,finished:!1}},created(){this.initData()},methods:{goBack(){document.referrer.includes("success")?window.requestAnimationFrame(()=>{this.$router.push("/home")}):history.go(-1)},initData(){this.getList()},async getList(){if(this.finished){this.loading=!1;return}const s=await b(this.paging);if(s.data.code===1){this.orderList.push(...s.data.data.records);let e=s.data.data.records;e&&Array.isArray(e)&&e.forEach(l=>{let u=0;l.orderDetails.forEach(i=>{u+=i.number}),l.sumNum=u}),this.loading=!1,this.paging.page>=s.data.pages&&(this.finished=!0),this.paging.page=this.paging.page+1}else console.log(s.data.console.error)},async addOrderAgain(s){const e=await I({id:s.id,userId:sessionStorage.getItem("userId")});e.data.code===1?window.requestAnimationFrame(()=>{this.$router.push("/home")}):console.log(e.data.console.error)},getStatus(s){let e="";switch(s){case 1:e="\u5F85\u4ED8\u6B3E";break;case 2:e="\u6B63\u5728\u6D3E\u9001";break;case 3:e="\u5DF2\u6D3E\u9001";break;case 4:e="\u5DF2\u5B8C\u6210";break;case 5:e="\u5DF2\u53D6\u6D88";break}return e}}},O=s=>(N("data-v-ed85f01e"),s=s(),V(),s),q={id:"order",class:"app"},F={class:"divHead"},T={class:"divTitle"},P={key:0,class:"divBody"},U={class:"timeStatus"},j={class:"dishList"},z={class:"result"},H={class:"price"},R={key:0,class:"btn"},G=["onClick"],J={key:1,class:"divNoData"},K=O(()=>t("div",{class:"divContainer"},[t("img",{src:D}),t("div",null,"\u6682\u65E0\u8BA2\u5355")],-1)),M=[K];function Q(s,e,l,u,i,d){const f=_("ArrowLeft"),v=A,k=_("van-cell"),y=_("van-list");return o(),n("div",q,[t("div",F,[t("div",T,[p(v,{onClick:d.goBack},{default:g(()=>[p(f)]),_:1},8,["onClick"]),C(" \u5386\u53F2\u8BA2\u5355 ")])]),i.orderList.length>0?(o(),n("div",P,[p(y,{modelValue:i.loading,"onUpdate:modelValue":e[0]||(e[0]=a=>i.loading=a),finished:i.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:d.getList},{default:g(()=>[(o(!0),n(h,null,m(i.orderList,(a,L)=>(o(),x(k,{key:L,class:"item"},{default:g(()=>[t("div",U,[t("span",null,r(a.orderTime),1),t("span",null,r(d.getStatus(a.status)),1)]),t("div",j,[(o(!0),n(h,null,m(a.orderDetails,(c,w)=>(o(),n("div",{key:w,class:"item"},[t("span",null,r(c.name)+"\xD7"+r(c.number)+"\u4EFD",1),t("span",null,r(c.amount),1)]))),128))]),t("div",z,[t("span",null,"\u5171"+r(a.sumNum)+" \u4EF6\u5546\u54C1,\u5B9E\u4ED8",1),t("span",H,"\uFFE5"+r(a.amount),1)]),a.status===4?(o(),n("div",R,[t("div",{class:"btnAgain",onClick:c=>d.addOrderAgain(a)},"\u518D\u6765\u4E00\u5355",8,G)])):B("",!0)]),_:2},1024))),128))]),_:1},8,["modelValue","finished","onLoad"])])):(o(),n("div",J,M))])}const $=S(E,[["render",Q],["__scopeId","data-v-ed85f01e"]]);export{$ as default};
