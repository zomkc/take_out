import{E as k}from"./axios.7f6bf870.js";import{E as A}from"./el-image-viewer.be72f516.js";/* empty css                */import{o as P,a as b}from"./order.7af7f6be.js";import{e as L,a as y}from"./login.ebb1e003.js";import{_ as C,aa as U,o as d,j as c,q as e,d as u,w as h,s as g,l as a,k as l,P as S,ab as D,ad as O,ae as q}from"./index.93b7fa5a.js";import{E as x}from"./index.2e452faa.js";import"./index.cc09d482.js";import"./index.560cc0f0.js";const E=""+new URL("../images/headPage.png",import.meta.url).href,F=""+new URL("../images/women.png",import.meta.url).href,I=""+new URL("../images/1.png",import.meta.url).href,N=""+new URL("../images/locations.png",import.meta.url).href,B=""+new URL("../images/orders.png",import.meta.url).href;const R={components:{ElConfigProvider:x},data(){return{form:{},msgFlag:!1,order:[{orderTime:"",status:void 0,orderDetails:[{name:"",number:void 0,amount:""}],amount:void 0,sumNum:0}]}},created(){this.userPhone=sessionStorage.getItem("userPhone"),this.initData(),this.initUserData()},methods:{async initUserData(){const o=await L({phone:this.userPhone});o.data.code===1?this.form=o.data.data:console.log(o.data.console.error)},goBack(){window.requestAnimationFrame(()=>{this.$router.push("/home")})},toAddressPage(){window.requestAnimationFrame(()=>{this.$router.push("/address")})},toOrderPage(){window.requestAnimationFrame(()=>{this.$router.push("/order")})},initData(){this.getLatestOrder()},async getLatestOrder(){const s=await P({page:1,pageSize:1});if(s.data.code===1){if(this.order=s.data.data.records,this.order&&this.order[0].orderDetails){let m=0;this.order[0].orderDetails.forEach(_=>{m+=_.number}),this.order[0].sumNum=m}}else console.log(s.data.console.error)},getStatus(o){let s="";switch(o){case 1:s="\u5F85\u4ED8\u6B3E";break;case 2:s="\u6B63\u5728\u6D3E\u9001";break;case 3:s="\u5DF2\u6D3E\u9001";break;case 4:s="\u5DF2\u5B8C\u6210";break;case 5:s="\u5DF2\u53D6\u6D88";break}return s},async addOrderAgain(){const o=await b({id:this.order[0].id});o.data.code===1?window.requestAnimationFrame(()=>{this.$router.push("/home")}):console.log(o.data.console.error)},async toPageLogin(){const o=await y();sessionStorage.removeItem("userPhone"),o.data.code===1?window.requestAnimationFrame(()=>{this.$router.push("/login")}):console.log(o.data.console.error)},async edit(){window.requestAnimationFrame(()=>{this.$router.push("/edituser")})},imgPathConvert(){return console.log(this.form,"=========="),"/api/"+this.form.avatar}}},n=o=>(O("data-v-9d9d89bb"),o=o(),q(),o),T={id:"user",class:"app"},V={class:"divHead"},j={class:"divTitle"},z=["model"],H=n(()=>e("div",{slot:"error",class:"image-slot"},[e("img",{class:"image",src:E})],-1)),G={class:"desc"},J={class:"divName"},K={key:0,src:F},M={key:1,src:I},Q={class:"divPhone"},W={class:"divContent"},X={class:"divLinks"},Y=n(()=>e("img",{src:N},null,-1)),Z=n(()=>e("span",null,"\u5730\u5740\u7BA1\u7406",-1)),$=n(()=>e("i",{class:"el-icon-arrow-right"},null,-1)),ee=[Y,Z,$],se=n(()=>e("img",{src:B},null,-1)),oe=n(()=>e("span",null,"\u5386\u53F2\u8BA2\u5355",-1)),te=n(()=>e("i",{class:"el-icon-arrow-right"},null,-1)),re=[se,oe,te],ie={key:0,class:"divOrders"},ae=n(()=>e("div",{class:"title"},"\u6700\u65B0\u8BA2\u5355",-1)),ne={class:"timeStatus"},de={class:"dishList"},ce={class:"result"},le={class:"price"},me={key:0,class:"btn"};function ue(o,s,m,_,t,i){const p=U("ArrowLeft"),f=k,v=A;return d(),c("div",T,[e("div",V,[e("div",j,[u(f,{onClick:i.goBack},{default:h(()=>[u(p)]),_:1},8,["onClick"]),g(" \u4E2A\u4EBA\u4E2D\u5FC3 ")]),e("div",{class:"divUser",model:t.form},[u(v,{class:"image",src:"/api"+t.form.avatar},{default:h(()=>[H]),_:1},8,["src"]),e("div",G,[e("div",J,[g(a(t.form.name)+" ",1),t.form.sex==2?(d(),c("img",K)):l("",!0),t.form.sex==1?(d(),c("img",M)):l("",!0)]),e("div",Q,a(t.form.phone),1)]),e("div",{class:"divUpdate",onClick:s[0]||(s[0]=(...r)=>i.edit&&i.edit(...r))}," \u7F16\u8F91\u4FE1\u606F ")],8,z)]),e("div",W,[e("div",X,[e("div",{class:"item",onClick:s[1]||(s[1]=(...r)=>i.toAddressPage&&i.toAddressPage(...r))},ee),e("div",{class:"item",onClick:s[2]||(s[2]=(...r)=>i.toOrderPage&&i.toOrderPage(...r))},re)]),t.order[0]?(d(),c("div",ie,[ae,e("div",ne,[e("span",null,a(t.order[0].orderTime),1),e("span",null,a(i.getStatus(t.order[0].status)),1)]),e("div",de,[(d(!0),c(S,null,D(t.order[0].orderDetails,(r,w)=>(d(),c("div",{key:w,class:"item"},[e("span",null,a(r.name)+"\xD7"+a(r.number)+"\u4EFD",1),e("span",null,a(r.amount),1)]))),128))]),e("div",ce,[e("span",null,"\u5171"+a(t.order[0].sumNum)+" \u4EF6\u5546\u54C1,\u5B9E\u4ED8",1),e("span",le,"\uFFE5"+a(t.order[0].amount),1)]),t.order[0].status===4?(d(),c("div",me,[e("div",{class:"btnAgain",onClick:s[3]||(s[3]=(...r)=>i.addOrderAgain&&i.addOrderAgain(...r))},"\u518D\u6765\u4E00\u5355")])):l("",!0)])):l("",!0),e("div",{class:"quitLogin",onClick:s[4]||(s[4]=(...r)=>i.toPageLogin&&i.toPageLogin(...r))}," \u9000\u51FA\u767B\u5F55 ")])])}const Pe=C(R,[["render",ue],["__scopeId","data-v-9d9d89bb"]]);export{Pe as default};
